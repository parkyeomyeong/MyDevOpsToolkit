# CodeCompare
## info
- 읽음시간 : 15분
- 사용언어 : python(3.11.5)
- 사용툴 : Visual Studio Code (필수)
- 사용 서버 스펙 : Spring boot, Java
- GitHub : https://github.com/parkyeomyeong/MyDevOpsToolkit.git
의 CodeCompareTools 폴더


## 배경
지금 다니는 회사에서 내 업무는 ERP 를 운영하고 있으며 개발, 운영서버를 따로 두며 운영하고있다.
새로운 프로젝트나 변경사항은 개발서버 선 적용 후 테스트와 검증작업을 마치고 나면 운영서버에 적용시키는데
다른 팀들과 다르게 설정값, 키, 운영에만 적용한 일부 서비스 등 여러가지 이유로 과장님 지시하에 **변경 사항을 직접 코드단위로 비교해가며 적용** 하고있다...

따라서 유지 보수 및 프로그램 개발 시간 이외에도
> 개발서버 적용 -> 테스트 적용 -> 운영서버 적용

이라는 배포 프로세스가 굉장히 오래 걸리는데

예를 들어 ERP 내에서 사용하는 용어를 단순 변경하기 위해 100개가 넘는 View 파일들을 직접 변경했는데 변경 작업시간 이외에
개발 -> 운영으로 옮기는 작업만 3~4일 동안 한 적도 있었다.

이에 불필요한 **내 집중력과 시간을 잡아먹는다고 판단**하여 프로그램을 개발했으며
사용 언어, 프레임워크와 관련없이 누구나 비슷한 상황이라면 도움이 될것 같아 공유하고자 한다.

## 설명
직접 코드를 비교하는 기능을 개발하지 않아도 사용하는 대부분의 IDE 에는 대부분 코드비교하는 기능은 있다
실제로 회사에서 사용하는 sts에도 코드비교 기능이 있지만 단축키 설정도 안되며 내가 원하는 파일들을 일일히 선택하는 수고로움이 정말 많은 시간을 차지한다.

따라서 나는 IDE의 코드비교 기능은 사용하되 원하는 목록을 추리고 그 목록대로 코드비교 툴을 사용하는 방식으로 구현했다.(내 업무를 보조해줄 툴이니 많은 시간은 사치이기 때문!)

따라서 
> - 파일을 탐색하고 서로다른 파일 비교를 위해 python과 filecmp라이브러리 사용
- 서로다른 파일을 일치화 시키기위해 VSC 내장기능을 실행할 수 있는 subprocess 라이브러리 사용


## 사용방법

### 사용준비
1. python install 버전무관(필자는 3.11.5 ver 사용 중)
2. Visual Studio Code Install 버전무관

### 사용방법
1. 코드 제일 상단 변수 초기화
```
# 검사 제외할 파일
EXCLUDE_FILES = []

# 디렉토리 경로 설정(절대경로)
dev_directory = r'<Your Dev Project Path>'
prod_directory = r'<Your Was Project Path>'

# VS Code 실행 파일의 절대 경로
vscode_path = r"C:\Users\<UserName>\AppData\Local\Programs\Microsoft VS Code\Code.exe"
```
- 비교 안할 파일 목록  채우기
- 개발서버, 운영서버 프로젝트의 최상단 폴더 절대경로를 입력
	⚠︎ **_두 경로 아래 폴더구조와 구성은 동일해야 원활한 비교 가능하며 어느 한쪽에만 있는 파일은 표시 안함_**
- Visual Studio Code 프로그램의 실행파일 절대경로를 입력하며 
보통 위 경로대로 설치되므로 사용자컴퓨터의 UserName을 바꿔 입력하면 됨

2. Visual Studio Code 실행 후 오른쪽 상단 ▶︎ 버튼으로 실행
(터미널에서 python main.py입력으로도 실행 가능)
3. 목록 순서대로 VSC 내장 기능으로 파일 비교툴을 사용하게 되며 두 파일을 일치화 시킨 후 Enter 를 누르면 다음 비교창이 뜨게됨
4. 3을 반복하며 마지막 목록까지 진행

## 마무리

물론 두 파일의 서로다른 부분을 찾아 손쉽게 동기화 시켜주는 툴은 많지만
내가 가진 두 프로젝트를 직접 비교하여 같은 이름의 다른 내용을 찾는 기능 + 직접 비교해가며 동기화 시킬 수 있는 기능
이 두가지를 바로 사용할 수 있는 툴을 찾지 못해서 직접 만들어 보았다.

이 프로그램 덕분에 약 1시간 진행하던 업무를 약 5분으로 단축시켜서 회사 동기들에게도 공유할 예정이다~
